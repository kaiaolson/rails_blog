<h1><%= @post.title %></h1>
<h4>Category: <%= @post.category_title %></h4>
<h5>Created by: <%= @post.user_full_name %></h5>
<p><%= @post.body %></p>

<% if can? :edit, @post %>
<%= link_to "Edit", edit_post_path(@post), class: "btn btn-warning" %>
<% end %>

<% if can? :destroy, @post %>
<%= link_to "Delete", post_path(@post), class: "btn btn-danger", method: :delete, data: {confirm: "Are you sure you want to delete this post?"} %>
<% end %>

<% favorite = @post.favorite_for current_user %>
<% if favorite %>
  <%= link_to fa_icon("heart"), post_favorite_path(@post, favorite), method: :delete, class: "fa-icon-link" %>
<% else %>
  <%= link_to fa_icon("heart-o"), post_favorites_path(@post), method: :post, class: "fa-icon-link" %>
<% end %>

<h2>Comments</h2>

<% @post.comments.order("created_at DESC").each do |com|%>
  <%= content_tag(:div) do %>
    <%= com.body %> |
    <%= com.created_at.strftime("%B %d, %Y") %>
    <%#= shortcut for path %>
    <% if can? :destroy, com %>
    <%= link_to "Delete", [@post, com],
                          method: :delete,
                          style: "text-align: right;",
                          data: {confirm: "Are you sure?"}%>
    <% end %>
    <hr>
  <% end %>
<% end %>

<h3>Create a Comment</h3>
<%= @comment.errors.full_messages.join(", ") %>
<%= form_for [@post, @comment] do |f| %>
  <%= content_tag(:div, class: "form-group") do %>
    <%= f.label :body %>
    <%= f.text_area :body, class: "form-control" %>
  <% end %>
  <%= f.submit class: "btn btn-primary" %>
<% end %>
